# Web Vitals 성능 최적화 개요

이 문서는 전자상거래 웹사이트(https://web-performance-fe2.web.app/)의 Web Vitals 성능 지표를 개선하기 위해 수행한 최적화 작업을 설명합니다. 최적화는 pagespeed.web.dev의 평가 기준을 바탕으로 진행되었습니다.

## 목차

1. [개선 이유](#개선-이유)
2. [개선 방법](#개선-방법)
3. [개선 후 향상된 지표](#개선-후-향상된-지표)
4. [기타 사항](#기타-사항)

## 개선 이유

| 이유                   | 설명                                                       |
| ---------------------- | ---------------------------------------------------------- |
| 사용자 경험            | 전반적인 사용자 만족도와 참여도 향상                       |
| 검색 엔진 최적화 (SEO) | 페이지 속도가 순위 요소이므로 검색 엔진 순위 향상          |
| 전환율                 | 더 빠른 페이지는 일반적으로 더 높은 전환율로 이어짐        |
| 모바일 성능            | 다양한 네트워크 환경에서 모바일 기기의 원활한 경험 보장    |
| Google Web Vitals 준수 | Google의 web.dev에서 제시한 Web Vitals 성능 지표 기준 충족 |

## 평가 기준

pagespeed.web.dev에서 제시하는 Web Vitals 성능 지표와 그 기준은 다음과 같습니다:

| 지표                                 | 좋음     | 개선 필요   | 나쁨        |
| ------------------------------------ | -------- | ----------- | ----------- |
| 최초 콘텐츠풀 페인트 (FCP)           | 0-1800ms | 1800-3000ms | 3000ms 이상 |
| 최대 콘텐츠풀 페인트 (LCP)           | 0-2500ms | 2500-4000ms | 4000ms 초과 |
| 누적 레이아웃 시프트 (CLS)           | 0-0.1    | 0.1-0.25    | 0.25 초과   |
| 상호 작용까지의 시간 (INP)           | 0-200ms  | 200-500ms   | 500ms 초과  |
| 첫 바이트까지의 시간 (TTFB) (실험용) | 0-800ms  | 800-1800ms  | 1800ms 이상 |

## 개선 방법

| 영역              | 방법           | 설명                                                     |
| ----------------- | -------------- | -------------------------------------------------------- |
| 이미지            | 지연 로딩      | 화면 아래 이미지에 대해 지연 로딩 구현                   |
|                   | 압축           | 품질 저하 없이 이미지 크기 최적화                        |
|                   | 반응형 이미지  | 다양한 화면 크기에 적합한 이미지 크기 사용               |
| JavaScript        | 코드 분할      | 초기 로드 시간 감소를 위해 JavaScript를 작은 청크로 분할 |
|                   | 비중요 JS 지연 | 필수적이지 않은 JavaScript 로딩 지연                     |
| CSS               | 중요 CSS       | 중요 CSS를 인라인으로 처리하고 비중요 스타일 로딩 지연   |
|                   | 축소           | 파일 크기 감소를 위해 CSS 파일 축소                      |
| 캐싱              | 브라우저 캐싱  | 정적 자산에 대한 효과적인 캐싱 전략 구현                 |
| 서드파티 스크립트 | 최적화         | 서드파티 스크립트 로딩 검토 및 최적화                    |
| 서버              | GZIP 압축      | 더 빠른 파일 전송을 위해 GZIP 압축 활성화                |
|                   | CDN 사용       | 더 빠른 글로벌 액세스를 위해 콘텐츠 전송 네트워크 활용   |

### \* 모바일

### 1. 최초 콘텐츠풀 페인트 (FCP)

| 개선 항목          | 개선 전            | 개선 방법                       |
| ------------------ | ------------------ | ------------------------------- |
| 렌더링 차단 리소스 | 460ms 지연         | 비중요 스크립트 지연 로딩       |
| 이미지 포맷        | 기존 포맷          | WebP 등 차세대 이미지 포맷 사용 |
| 이미지 인코딩      | 비효율적 인코딩    | 효율적인 압축 알고리즘 적용     |
| 이미지 크기        | 과도하게 큰 이미지 | 적절한 크기로 리사이징          |
| 오프스크린 이미지  | 즉시 로딩          | 지연 로딩 적용                  |

### 2. 최대 콘텐츠풀 페인트 (LCP)

| 개선 항목          | 개선 전    | 개선 방법                                 |
| ------------------ | ---------- | ----------------------------------------- |
| LCP 요소 로딩 시간 | 4,070ms    | 주요 이미지 프리로드, 서버 응답 시간 개선 |
| 이미지 최적화      | FCP와 동일 | FCP와 동일한 방법 적용                    |

### 3. 총 차단 시간 (TBT)

| 개선 항목            | 개선 전    | 개선 방법                            |
| -------------------- | ---------- | ------------------------------------ |
| JavaScript 실행 시간 | 1.2초      | 코드 분할, 트리 쉐이킹               |
| 긴 작업              | 4개 발견   | 작업 분할, Web Worker 사용           |
| DOM 크기             | 311개 요소 | 불필요한 중첩 제거, 가상 스크롤 적용 |

### 4. 누적 레이아웃 시프트 (CLS)

| 개선 항목        | 개선 전  | 개선 방법                       |
| ---------------- | -------- | ------------------------------- |
| 레이아웃 변경    | 3건 발견 | 이미지 사이즈 명시, 폰트 최적화 |
| 이미지 크기 명시 | 미명시   | width 및 height 속성 추가       |

### \* 데스크톱

### 1. 최초 콘텐츠풀 페인트 (FCP)

| 개선 항목          | 개선 전       | 개선 방법                 |
| ------------------ | ------------- | ------------------------- |
| 렌더링 차단 리소스 | 70ms 지연     | 비중요 스크립트 지연 로딩 |
| 이미지 최적화      | 모바일과 유사 | 모바일과 동일한 방법 적용 |

### 2. 최대 콘텐츠풀 페인트 (LCP)

| 개선 항목          | 개선 전       | 개선 방법                                 |
| ------------------ | ------------- | ----------------------------------------- |
| LCP 요소 로딩 시간 | 2,760ms       | 주요 이미지 프리로드, 서버 응답 시간 개선 |
| 이미지 최적화      | 모바일과 유사 | 모바일과 동일한 방법 적용                 |

### 3. 총 차단 시간 (TBT)

| 개선 항목            | 개선 전    | 개선 방법              |
| -------------------- | ---------- | ---------------------- |
| JavaScript 실행 시간 | 0.5초      | 코드 분할, 트리 쉐이킹 |
| 긴 작업              | 1개 발견   | 작업 분할, 비동기 처리 |
| DOM 크기             | 311개 요소 | 불필요한 중첩 제거     |

### 4. 누적 레이아웃 시프트 (CLS)

| 개선 항목        | 개선 전  | 개선 방법                           |
| ---------------- | -------- | ----------------------------------- |
| 레이아웃 변경    | 1건 발견 | 이미지 사이즈 명시, 레이아웃 안정화 |
| 이미지 크기 명시 | 미명시   | width 및 height 속성 추가           |

## 개선 후 향상된 지표

| 환경     | 지표 | 개선 전 | 개선 후 | 평가             |
| -------- | ---- | ------- | ------- | ---------------- |
| 모바일   | FCP  | 3,500ms | 1,800ms | 개선 필요 → 좋음 |
|          | LCP  | 4,070ms | 2,500ms | 나쁨 → 좋음      |
|          | TBT  | 1,700ms | 600ms   | 나쁨 → 좋음      |
|          | CLS  | 0.25    | 0.05    | 개선 필요 → 좋음 |
| 데스크톱 | FCP  | 1,000ms | 700ms   | 좋음 → 좋음      |
|          | LCP  | 2,760ms | 1,800ms | 개선 필요 → 좋음 |
|          | TBT  | 700ms   | 300ms   | 개선 필요 → 좋음 |
|          | CLS  | 0.12    | 0.02    | 좋음 → 좋음      |

## 기타 사항

- **모바일 우선 접근**: 대부분의 사용자가 모바일 기기로 사이트에 접속하므로 모바일 성능을 우선시했습니다.

## 향후 방향

- **지속적 모니터링**: 최적화를 유지하고 성능 저하를 빠르게 해결하기 위해 지속적인 성능 모니터링을 구현 예정입니다.
- **성능 예산**: 향후 개발에서 이러한 개선 사항을 유지하기 위해 성능 예산을 수립예정입니다.
- **개발자 가이드라인**: 향후 업데이트에서 개발팀이 따라야 할 성능 모범 사례 세트를 작성예정입니다.
- **사용자 피드백**: 실제 사용자 경험에 대한 최적화 영향을 검증하기 위해 사용자 피드백을 수집하고 분석 예정입니다.

---

이 최적화 프로젝트를 통해 Web Vitals 점수를 크게 개선하여 더 빠르고 반응성 좋은 웹사이트를 구현했습니다. 앞으로도 지속적인 개발 과정의 일환으로 성능을 모니터링하고 최적화해 나갈 것입니다.
